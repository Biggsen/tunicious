<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session e80f539f-e863-49b7-8d96-57911c2b9cf3 (2025-08-16 14:48Z) -->

# Add total tracks to playlist view (2025-08-16 14:48Z)

_**User (2025-08-15 16:41Z)**_

add total tracks below the Total unique albums: 9 on playlistsingle view

---

_**Agent (model default, mode Agent)**_

I'll help you add a total tracks count below the "Total unique albums" text in the PlaylistSingle view. Let me first examine the current implementation to understand how to add this feature.


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/views/playlists/PlaylistSingle.vue</summary>

</details>
</tool-use>

---

Now I need to check how the Spotify API composable works to understand how to get the total tracks count. Let me examine the `useSpotifyApi` composable:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/composables/useSpotifyApi.js</summary>

</details>
</tool-use>

---

Let me continue reading the `useSpotifyApi` composable to see if there's already a method that returns playlist data with track count:


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/composables/useSpotifyApi.js</summary>

</details>
</tool-use>

---

Perfect! I can see that the `getPlaylist` method already returns the full playlist data from Spotify, which includes the `tracks.total` field. I can see from the `getPlaylistAlbumsWithDates` method that it also returns the `total` field from the playlist tracks endpoint. 

Now I need to modify the PlaylistSingle view to:
1. Store the total tracks count from the playlist data
2. Display it below the "Total unique albums" text

Let me update the PlaylistSingle.vue file:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/views/playlists/PlaylistSingle.vue</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -37,4 +37,5 @@
  const playlistName = ref('');
  const playlistDoc = ref(null);
+ const totalTracks = ref(0);
  
  // Store the full album data with dates and sorted album IDs
```

</details>

</tool-use>

---

Now I need to update the `loadPlaylistPage` function to fetch and store the total tracks count:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/views/playlists/PlaylistSingle.vue</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -331,4 +331,5 @@
        const playlistResponse = await getPlaylist(id.value);
        playlistName.value = playlistResponse.name;
+       totalTracks.value = playlistResponse.tracks?.total || 0;
      }
      
```

</details>

</tool-use>

---

Now I need to update the template to display the total tracks count below the "Total unique albums" text:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** • Edit file: src/views/playlists/PlaylistSingle.vue</summary>

**Chunk 1**
Lines added: 2, lines removed: 1

```diff
@@ -526,5 +526,6 @@
      &lt;/p&gt;
  
-     &lt;p class="text-lg mb-6"&gt;Total unique albums: {{ totalAlbums }}&lt;/p&gt;
+     &lt;p class="text-lg mb-2"&gt;Total unique albums: {{ totalAlbums }}&lt;/p&gt;
+     &lt;p class="text-lg mb-6"&gt;Total tracks: {{ totalTracks }}&lt;/p&gt;
      &lt;LoadingMessage v-if="loading" /&gt;
      &lt;ErrorMessage v-else-if="error" :message="error" /&gt;
```

</details>

</tool-use>

---

Perfect! I've successfully added the total tracks count to the PlaylistSingle view. Here's what I implemented:

1. **Added a new reactive variable** `totalTracks` to store the total number of tracks in the playlist
2. **Updated the `loadPlaylistPage` function** to fetch the total tracks count from the Spotify API response when getting playlist data
3. **Modified the template** to display "Total tracks: X" below the "Total unique albums" text

The changes ensure that:
- The total tracks count is fetched from Spotify's playlist API response (which includes `tracks.total`)
- The count is displayed in the same style as the albums count
- The layout maintains proper spacing with the existing design

The total tracks count will now appear below the "Total unique albums: 9" text in the playlist view, showing the actual number of tracks in the Spotify playlist.

---

