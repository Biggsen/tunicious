<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 3839e594-bbe9-4634-b704-ccb5c97e2b88 (2025-06-29 19:39Z) -->

# Check loved tracks on Last.fm (2025-06-29 19:39Z)

_**User (2025-06-29 18:39Z)**_

on the albumview, can we find out how many tracks are loved on lastfm via the lastfm api?

---

_**Agent (mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants to enhance the AlbumView with Last.fm data, specifically to show how many tracks are "loved" on Last.fm. I need to:

1. First, examine the current AlbumView component to understand its structure
2. Look at the existing Last.fm API integration to understand how it works
3. Find out if there's already an API method for getting loved tracks
4. If not, implement the functionality to fetch loved tracks from Last.fm API
5. Update the AlbumView to display this information

Let me start by examining the AlbumView and the Last.fm API composable.</details></think>

---

I'll help you add Last.fm loved tracks functionality to the AlbumView. Let me first examine the current AlbumView and the existing Last.fm API integration.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/views/music/AlbumView.vue</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/composables/useLastFmApi.js</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to see the rest of the Last.fm API composable and understand what methods are available. I also want to see if there's already a method for getting loved tracks, or if I need to add one.

Let me get the full Last.fm API file and also check the current AlbumView to see where I should integrate the loved tracks functionality.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/composables/useLastFmApi.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/views/music/AlbumView.vue</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to understand how to get user's loved tracks from Last.fm. I notice that the current Last.fm API composable doesn't have a method for getting loved tracks. I need to:

1. Add a method to get user's loved tracks to the Last.fm API composable
2. Add logic to the AlbumView to compare the album's tracks with the user's loved tracks
3. Display the count of loved tracks in the AlbumView UI

Let me also check if the user has Last.fm username stored and how I can access it.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "lastFmUserName user data access" • **25** results</summary>
            
| File | Lines |
|------|-------|
| `src/views/auth/AccountView.vue` | L46-94 |
| `src/views/auth/AccountView.vue` | L1-46 |
| `src/components/LastFmStats.vue` | L135-169 |
| `src/composables/useLastFmApi.js` | L1-64 |
| `LASTFM_SETUP.md` | L1-50 |
| `src/composables/useLastFmApi.js` | L64-124 |
| `src/composables/useLastFmApi.js` | L124-185 |
| `src/components/LastFmStats.vue` | L79-135 |
| `src/utils/musicServiceLinks.js` | L1-10 |
| `src/components/LastFmStats.vue` | L1-79 |
| `src/views/auth/AccountView.vue` | L94-147 |
| `src/constants.js` | L9-14 |
| `LASTFM_SETUP.md` | L50-116 |
| `src/constants.js` | L4-9 |
| `src/composables/useLastFmApi.js` | L185-202 |
| `LASTFM_SETUP.md` | L116-174 |
| `src/components/LastFmStats.vue` | L169-203 |
| `src/composables/useAlbumsData.js` | L1-33 |
| `src/views/music/ArtistView.vue` | L270-326 |
| `src/components/LastFmStats.vue` | L203-234 |
| `src/composables/useAlbumsData.js` | L33-101 |
| `src/components/AlbumItem.vue` | L158-242 |
| `src/composables/useUserData.js` | L1-51 |
| `src/views/playlists/PlaylistSingle.vue` | L437-494 |
| `src/components/AlbumItem.vue` | L1-75 |

</details>
</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="web_search">
<details>
            <summary>Tool use: **web_search** • Searched web `last.fm API user.getlovedtracks method documentation` • **6** results</summary>
        
| Title | URL | Chunk |
|-------|-----|-------|
| user.getLovedTracks | https://www.last.fm/api/show/user.getLovedTracks | Last.fm <br/><br/> Search <br/><br/>Search Search <br/><br/> Toggle navigation <br/><br/>Search Reset Search <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/> Log In Sign Up <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/>* Log In<br/>* Sign Up<br/><br/>* Last.fm API  <br/>   * Getting started<br/>* API Guides  <br/>   * Introduction  <br/>   * Authentication  <br/>         * Web How-To  <br/>         * Mobile How-To  <br/>         * Desktop How-To  <br/>         * Auth Spec  <br/>   * Scrobbling 2.0 Documentation  <br/>   * Radio API  <br/>   * Playlists API  <br/>   * API Tools  <br/>   * REST Requests  <br/>   * XML-RPC  <br/>   * Terms of Service<br/>* API Methods  <br/>   * album  <br/>         * album.addTags  <br/>         * album.getInfo  <br/>         * album.getTags  <br/>         * album.getTopTags  <br/>         * album.removeTag  <br/>         * album.search  <br/>   * artist  <br/>         * artist.addTags  <br/>         * artist.getCorrection  <br/>         * artist.getInfo  <br/>         * artist.getSimilar  <br/>         * artist.getTags  <br/>         * artist.getTopAlbums  <br/>         * artist.getTopTags  <br/>         * artist.getTopTracks  <br/>         * artist.removeTag  <br/>         * artist.search  <br/>   * auth  <br/>         * auth.getMobileSession  <br/>         * auth.getSession  <br/>         * auth.getToken  <br/>   * chart  <br/>         * chart.getTopArtists  <br/>         * chart.getTopTags  <br/>         * chart.getTopTracks  <br/>   * geo  <br/>         * geo.getTopArtists  <br/>         * geo.getTopTracks  <br/>   * library  <br/>         * library.getArtists  <br/>   * tag  <br/>         * tag.getInfo  <br/>         * tag.getSimilar  <br/>         * tag.getTopAlbums  <br/>         * tag.getTopArtists  <br/>         * tag.getTopTags  <br/>         * tag.getTopTracks  <br/>         * tag.getWeeklyChartList  <br/>   * track  <br/>         * track.addTags  <br/>         * track.getCorrection  <br/>         * track.getInfo  <br/>         * track.getSimilar  <br/>         * track.getTags  <br/>         * track.getTopTags  <br/>         * track.love  <br/>         * track.removeTag  <br/>         * track.scrobble  <br/>         * track.search  <br/>         * track.unlove  <br/>         * track.updateNowPlaying  <br/>   * user  <br/>         * user.getFriends  <br/>         * user.getInfo  <br/>         * user.getLovedTracks  <br/>         * user.getPersonalTags  <br/>         * user.getRecentTracks  <br/>         * user.getTopAlbums  <br/>         * user.getTopArtists  <br/>         * user.getTopTags  <br/>         * user.getTopTracks  <br/>         * user.getWeeklyAlbumChart  <br/>         * user.getWeeklyArtistChart  <br/>         * user.getWeeklyChartList  <br/>         * user.getWeeklyTrackChart<br/><br/># # user.getLovedTracks<br/><br/>Get the last 50 tracks loved by a user.<br/><br/>## # Example URLs<br/><br/>**JSON:** /2.0/?method=user.getlovedtracks&user=rj&api\_key=YOUR\_API\_KEY&format=json   <br/>**XML:** /2.0/?method=user.getlovedtracks&user=rj&api\_key=YOUR\_API\_KEY <br/><br/>## # Params<br/><br/>**user** (Required) : The user name to fetch the loved tracks for.  <br/>**limit** (Optional) : The number of results to fetch per page. Defaults to 50.  <br/>**page** (Optional) : The page number to fetch. Defaults to first page.  <br/>**api\_key** (Required) : A Last.fm API key.<br/><br/>## # Auth<br/><br/>This service does **not** require authentication.<br/><br/>## # Sample Response<br/><br/>```<br/><lovedtracks user="RJ"><br/>  <track><br/>    <name>The Glass Prison</name><br/>    <mbid/><br/>    <url>www.last.fm/music/Dream+Theater/_/The+Glass+Prison</url><br/>    <date uts="1216371514">18 Jul 2008, 08:58</date><br/>    <artist><br/>      <name>Dream Theater</name><br/>      <mbid>28503ab7-8bf2-4666-a7bd-2644bfc7cb1d</mbid><br/>      <url>http://www.last.fm/music/Dream+Theater</url><br/>    </artist><br/>    <image size="small">...</image><br/>    <image size="medium">...</image><br/>    <image size="large">...</image><br/>  </track><br/>  ...<br/></lovedtracks><br/><br/>```<br/><br/>## # Errors<br/><br/>* **2** : Invalid service - This service does not exist<br/>* **3** : Invalid Method - No method with that name in this package<br/>* **4** : Authentication Failed - You do not have permissions to access the service<br/>* **5** : Invalid format - This service doesn't exist in that format<br/>* **6** : Invalid parameters - Your request is missing a required parameter<br/>* **7** : Invalid resource specified<br/>* **8** : Operation failed - Something else went wrong<br/>* **9** : Invalid session key - Please re-authenticate<br/>* **10** : Invalid API key - You must be granted a valid key by last.fm<br/>* **11** : Service Offline - This service is temporarily offline. Try again later.<br/>* **13** : Invalid method signature supplied<br/>* **16** : There was a temporary error processing your request. Please try again<br/>* **26** : Suspended API key - Access for your account has been suspended, please contact Last.fm<br/>* **29** : Rate limit exceeded - Your IP has made too many requests in a short period<br/><br/> ← user.getInfo  user.getPersonalTags →<br/><br/>## Company<br/><br/>* About Last.fm<br/>* Contact Us<br/>* Jobs<br/>* Features<br/><br/>## Help<br/><br/>* Track My Music<br/>* Community Support<br/>* Community Guidelines<br/>* Help<br/><br/>## Goodies<br/><br/>* Download Scrobbler<br/>* Developer API<br/>* Free Music Downloads<br/>* Merchandise<br/><br/>## Account<br/><br/>* Sign Up<br/>* Log In<br/>* Subscribe<br/><br/>## Follow Us<br/><br/>* Facebook<br/>* X<br/>* Bluesky<br/>* Instagram<br/>* YouTube<br/><br/>* **English**current language<br/>* Deutsch<br/>* Español<br/>* Français<br/>* Italiano<br/>* 日本語<br/>* Polski<br/>* Português<br/>* Русский<br/>* Svenska<br/>* Türkçe<br/>* 简体中文<br/><br/>* CBS Interactive © 2025 Last.fm Ltd. All rights reserved<br/>* Terms of Use<br/>* Privacy Policy<br/>* Legal Policies<br/>* California Notice<br/>* Do Not Sell My Personal Information<br/>* Jobs at Paramount<br/>* Last.fm Music<br/><br/>Audioscrobbler<br/><br/>Last.fm 'as' logo <br/><br/>## API Calls<br/><br/>Close <br/><br/> Close <br/><br/> Loading player…<br/><br/> Previous <br/><br/> Next <br/><br/> Play <br/><br/> Next <br/><br/> Settings <br/><br/>* Open in Spotify Web Player<br/>* Open on YouTube website<br/>* Change playback source<br/><br/>### Scrobble from Spotify?<br/><br/>Connect your Spotify account to your Last.fm account and scrobble everything you listen to, from any Spotify app on any device or platform.<br/><br/> Connect to Spotify <br/><br/> Dismiss <br/><br/> Close |
| API Docs | https://www.last.fm/api | Last.fm <br/><br/> Search <br/><br/>Search Search <br/><br/> Toggle navigation <br/><br/>Search Reset Search <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/> Log In Sign Up <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/>* Log In<br/>* Sign Up<br/><br/>* Last.fm API  <br/>   * Getting started<br/>* API Guides  <br/>   * Introduction  <br/>   * Authentication  <br/>         * Web How-To  <br/>         * Mobile How-To  <br/>         * Desktop How-To  <br/>         * Auth Spec  <br/>   * Scrobbling 2.0 Documentation  <br/>   * Radio API  <br/>   * Playlists API  <br/>   * API Tools  <br/>   * REST Requests  <br/>   * XML-RPC  <br/>   * Terms of Service<br/>* API Methods  <br/>   * album  <br/>         * album.addTags  <br/>         * album.getInfo  <br/>         * album.getTags  <br/>         * album.getTopTags  <br/>         * album.removeTag  <br/>         * album.search  <br/>   * artist  <br/>         * artist.addTags  <br/>         * artist.getCorrection  <br/>         * artist.getInfo  <br/>         * artist.getSimilar  <br/>         * artist.getTags  <br/>         * artist.getTopAlbums  <br/>         * artist.getTopTags  <br/>         * artist.getTopTracks  <br/>         * artist.removeTag  <br/>         * artist.search  <br/>   * auth  <br/>         * auth.getMobileSession  <br/>         * auth.getSession  <br/>         * auth.getToken  <br/>   * chart  <br/>         * chart.getTopArtists  <br/>         * chart.getTopTags  <br/>         * chart.getTopTracks  <br/>   * geo  <br/>         * geo.getTopArtists  <br/>         * geo.getTopTracks  <br/>   * library  <br/>         * library.getArtists  <br/>   * tag  <br/>         * tag.getInfo  <br/>         * tag.getSimilar  <br/>         * tag.getTopAlbums  <br/>         * tag.getTopArtists  <br/>         * tag.getTopTags  <br/>         * tag.getTopTracks  <br/>         * tag.getWeeklyChartList  <br/>   * track  <br/>         * track.addTags  <br/>         * track.getCorrection  <br/>         * track.getInfo  <br/>         * track.getSimilar  <br/>         * track.getTags  <br/>         * track.getTopTags  <br/>         * track.love  <br/>         * track.removeTag  <br/>         * track.scrobble  <br/>         * track.search  <br/>         * track.unlove  <br/>         * track.updateNowPlaying  <br/>   * user  <br/>         * user.getFriends  <br/>         * user.getInfo  <br/>         * user.getLovedTracks  <br/>         * user.getPersonalTags  <br/>         * user.getRecentTracks  <br/>         * user.getTopAlbums  <br/>         * user.getTopArtists  <br/>         * user.getTopTags  <br/>         * user.getTopTracks  <br/>         * user.getWeeklyAlbumChart  <br/>         * user.getWeeklyArtistChart  <br/>         * user.getWeeklyChartList  <br/>         * user.getWeeklyTrackChart<br/><br/># # Last.fm Music Discovery API<br/><br/>The Last.fm API allows anyone to build their own programs using Last.fm data. Find out more about how you can plug directly into our vast database or browse the list of methods on the left.<br/><br/>## # Getting started<br/><br/>Our API is available to anyone. Here's what you need to get going:<br/><br/>1. Get an API account<br/>2. Read the Documentation<br/>3. Join the Support Forums<br/><br/>Commercial or Research Usage<br/><br/>If you are planning to use our API for commercial or research/academic purposes, please contact us prior to use via email at partners@last.fm.<br/><br/> Introduction →<br/><br/>## Company<br/><br/>* About Last.fm<br/>* Contact Us<br/>* Jobs<br/>* Features<br/><br/>## Help<br/><br/>* Track My Music<br/>* Community Support<br/>* Community Guidelines<br/>* Help<br/><br/>## Goodies<br/><br/>* Download Scrobbler<br/>* Developer API<br/>* Free Music Downloads<br/>* Merchandise<br/><br/>## Account<br/><br/>* Sign Up<br/>* Log In<br/>* Subscribe<br/><br/>## Follow Us<br/><br/>* Facebook<br/>* X<br/>* Bluesky<br/>* Instagram<br/>* YouTube<br/><br/>* **English**current language<br/>* Deutsch<br/>* Español<br/>* Français<br/>* Italiano<br/>* 日本語<br/>* Polski<br/>* Português<br/>* Русский<br/>* Svenska<br/>* Türkçe<br/>* 简体中文<br/><br/>* CBS Interactive © 2025 Last.fm Ltd. All rights reserved<br/>* Terms of Use<br/>* Privacy Policy<br/>* Legal Policies<br/>* California Notice<br/>* Do Not Sell My Personal Information<br/>* Jobs at Paramount<br/>* Last.fm Music<br/><br/>Audioscrobbler<br/><br/>Last.fm 'as' logo <br/><br/>## API Calls<br/><br/>Close <br/><br/> Close <br/><br/> Loading player…<br/><br/> Previous <br/><br/> Next <br/><br/> Play <br/><br/> Next <br/><br/> Settings <br/><br/>* Open in Spotify Web Player<br/>* Open on YouTube website<br/>* Change playback source<br/><br/>### Scrobble from Spotify?<br/><br/>Connect your Spotify account to your Last.fm account and scrobble everything you listen to, from any Spotify app on any device or platform.<br/><br/> Connect to Spotify <br/><br/> Dismiss <br/><br/> Close |
| The Last.fm API | https://www.last.fm/api/intro | Last.fm <br/><br/> Search <br/><br/>Search Search <br/><br/> Toggle navigation <br/><br/>Search Reset Search <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/> Log In Sign Up <br/><br/>* Upgrade to Pro<br/>* Live<br/>* Music<br/>* Charts<br/>* Events<br/><br/>* Log In<br/>* Sign Up<br/><br/>* Last.fm API  <br/>   * Getting started<br/>* API Guides  <br/>   * Introduction  <br/>   * Authentication  <br/>         * Web How-To  <br/>         * Mobile How-To  <br/>         * Desktop How-To  <br/>         * Auth Spec  <br/>   * Scrobbling 2.0 Documentation  <br/>   * Radio API  <br/>   * Playlists API  <br/>   * API Tools  <br/>   * REST Requests  <br/>   * XML-RPC  <br/>   * Terms of Service<br/>* API Methods  <br/>   * album  <br/>         * album.addTags  <br/>         * album.getInfo  <br/>         * album.getTags  <br/>         * album.getTopTags  <br/>         * album.removeTag  <br/>         * album.search  <br/>   * artist  <br/>         * artist.addTags  <br/>         * artist.getCorrection  <br/>         * artist.getInfo  <br/>         * artist.getSimilar  <br/>         * artist.getTags  <br/>         * artist.getTopAlbums  <br/>         * artist.getTopTags  <br/>         * artist.getTopTracks  <br/>         * artist.removeTag  <br/>         * artist.search  <br/>   * auth  <br/>         * auth.getMobileSession  <br/>         * auth.getSession  <br/>         * auth.getToken  <br/>   * chart  <br/>         * chart.getTopArtists  <br/>         * chart.getTopTags  <br/>         * chart.getTopTracks  <br/>   * geo  <br/>         * geo.getTopArtists  <br/>         * geo.getTopTracks  <br/>   * library  <br/>         * library.getArtists  <br/>   * tag  <br/>         * tag.getInfo  <br/>         * tag.getSimilar  <br/>         * tag.getTopAlbums  <br/>         * tag.getTopArtists  <br/>         * tag.getTopTags  <br/>         * tag.getTopTracks  <br/>         * tag.getWeeklyChartList  <br/>   * track  <br/>         * track.addTags  <br/>         * track.getCorrection  <br/>         * track.getInfo  <br/>         * track.getSimilar  <br/>         * track.getTags  <br/>         * track.getTopTags  <br/>         * track.love  <br/>         * track.removeTag  <br/>         * track.scrobble  <br/>         * track.search  <br/>         * track.unlove  <br/>         * track.updateNowPlaying  <br/>   * user  <br/>         * user.getFriends  <br/>         * user.getInfo  <br/>         * user.getLovedTracks  <br/>         * user.getPersonalTags  <br/>         * user.getRecentTracks  <br/>         * user.getTopAlbums  <br/>         * user.getTopArtists  <br/>         * user.getTopTags  <br/>         * user.getTopTracks  <br/>         * user.getWeeklyAlbumChart  <br/>         * user.getWeeklyArtistChart  <br/>         * user.getWeeklyChartList  <br/>         * user.getWeeklyTrackChart<br/><br/># # Introduction<br/><br/>The Last.fm API allows you to call _methods_ that respond in REST  style xml. Individual methods are detailed in the menu on the left.<br/><br/>API ROOT<br/><br/>The API root URL is located at http://ws.audioscrobbler.com/2.0/ <br/><br/>Generally speaking, you will send a _method_ parameter expressed as 'package.method' along with method specific arguments to the root URL. The API supports multiple transport formats but will respond in Last.fm idiom xml by default.<br/><br/>Note:<br/><br/>* Please use an identifiable User-Agent header on all requests. This helps our logging and reduces the risk of you getting banned.<br/>* Be reasonable in your usage of the API and ensure you don't make an excessive number of calls as that can impact the reliability of the service to you and other users. We encourage best practice implementation, for example, if you're making a web application, try not to hit the API on page load. Your account may be suspended if your application is continuously making several calls per second or if you’re making excessive calls. See our API Terms of Service for more information on limits.<br/>* If you are planning to use our API for commercial purposes, please contact us via email at partners@last.fm.<br/>* We assume that you are using an RFC 3986 \-compliant HTTP client to access the web services. In particular, pay attention to your url encoding. This will not be an issue for 99% of developers.<br/><br/>## # Encoding<br/><br/>Use UTF-8  encoding when sending arguments to API methods.<br/><br/>## # Request Styles<br/><br/>You can get more information on how to work with REST requests or XML-RPC requests when calling the Last.fm API.<br/><br/>## # Authentication<br/><br/>The authentication protocol allows you to perform actions on user accounts in a manner that is secure for Last.fm users. All write services require authentication.<br/><br/>## # Scrobbling<br/><br/>We encourage services that use the Last.fm API to build-in scrobbling natively into their applications (where applicable, and particularly for media players), to allow users to send listening data in to their Last.fm user profiles. This can be done through our Scrobbling API.<br/><br/>## # Discussion<br/><br/>Join the Last.fm Support Forums  for information about new Web Services, access to beta API's, provide feedback and discuss development with other developers.<br/><br/>## # Terms of Service<br/><br/>For our API Terms of Service please see here<br/><br/> ← Last.fm API  Web How-To →<br/><br/>## Company<br/><br/>* About Last.fm<br/>* Contact Us<br/>* Jobs<br/>* Features<br/><br/>## Help<br/><br/>* Track My Music<br/>* Community Support<br/>* Community Guidelines<br/>* Help<br/><br/>## Goodies<br/><br/>* Download Scrobbler<br/>* Developer API<br/>* Free Music Downloads<br/>* Merchandise<br/><br/>## Account<br/><br/>* Sign Up<br/>* Log In<br/>* Subscribe<br/><br/>## Follow Us<br/><br/>* Facebook<br/>* X<br/>* Bluesky<br/>* Instagram<br/>* YouTube<br/><br/>* **English**current language<br/>* Deutsch<br/>* Español<br/>* Français<br/>* Italiano<br/>* 日本語<br/>* Polski<br/>* Português<br/>* Русский<br/>* Svenska<br/>* Türkçe<br/>* 简体中文<br/><br/>* CBS Interactive © 2025 Last.fm Ltd. All rights reserved<br/>* Terms of Use<br/>* Privacy Policy<br/>* Legal Policies<br/>* California Notice<br/>* Do Not Sell My Personal Information<br/>* Jobs at Paramount<br/>* Last.fm Music<br/><br/>Audioscrobbler<br/><br/>Last.fm 'as' logo <br/><br/>## API Calls<br/><br/>Close <br/><br/> Close <br/><br/> Loading player…<br/><br/> Previous <br/><br/> Next <br/><br/> Play <br/><br/> Next <br/><br/> Settings <br/><br/>* Open in Spotify Web Player<br/>* Open on YouTube website<br/>* Change playback source<br/><br/>### Scrobble from Spotify?<br/><br/>Connect your Spotify account to your Last.fm account and scrobble everything you listen to, from any Spotify app on any device or platform.<br/><br/> Connect to Spotify <br/><br/> Dismiss <br/><br/> Close |
| getLovedTracks - Unofficial Last.fm API docs | https://lastfm-docs.github.io/api-docs/user/getLovedTracks/ | Skip to content <br/><br/> Unofficial Last.fm API docs <br/><br/> getLovedTracks <br/><br/> Initializing search<br/><br/> lastfm-docs/api-docs <br/><br/> Unofficial Last.fm API docs <br/><br/> lastfm-docs/api-docs <br/><br/>* Introduction<br/>* Bugs<br/>* Error Codes<br/>* Album  <br/> Album  <br/>   * getInfo  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* Artist  <br/> Artist  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopAlbums  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * Search<br/>* Auth  <br/> Auth  <br/>   * Desktop  <br/>   * getSession  <br/>   * getToken  <br/>   * Signature<br/>* Chart  <br/> Chart  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks<br/>* Geo  <br/> Geo  <br/>   * getTopArtists  <br/>   * getTopTracks<br/>* Library  <br/> Library  <br/>   * getArtists<br/>* Tag  <br/> Tag  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * getWeeklyChartList<br/>* Track  <br/> Track  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* User  <br/> User  <br/>   * getFriends  <br/>   * getInfo  <br/>   * getLovedTracks  getLovedTracks  <br/>    Table of contents  <br/>         * Parameters  <br/>         * Responses  <br/>         * Examples  <br/>   * getPersonalTags  <br/>   * getRecentTracks  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * getWeeklyAlbumChart  <br/>   * getWeeklyArtistChart  <br/>   * getWeeklyChartList  <br/>   * getWeeklyTrackChart<br/><br/> Table of contents <br/>* Parameters<br/>* Responses<br/>* Examples<br/><br/># getLovedTracks<br/><br/>Returns a list of the tracks loved scrobbled by this user.<br/><br/>No authentication required.<br/><br/>## Parameters¶<br/><br/>\| Method   \| Type                                                                                                \| Default \| Required                                                                                                        \| Description                                               \|<br/>\| -------- \| --------------------------------------------------------------------------------------------------- \| ------- \| --------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------- \|<br/>\| user     \| [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/String) \| none    \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| The last.fm username to fetch the loved tracks of.        \|<br/>\| limit    \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number) \| 50      \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The number of results to fetch per page. Maximum is 1000. \|<br/>\| page     \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number) \| 1       \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The page number to fetch.                                 \|<br/>\| api\_key \| [key](https://www.last.fm/api/account/create)                                                       \| none    \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| A Last.fm API key.                                        \|<br/><br/>## Responses¶<br/><br/>Errors:<br/><br/>* 6 : Invalid parameters - Your request is missing a required parameter<br/>* 8 : Operation failed - Something else went wrong<br/>* 9 : Invalid session key - Please re-authenticate<br/>* 10 : Invalid API key - You must be granted a valid key by last.fm<br/>* 11 : Service Offline - This service is temporarily offline. Try again later.<br/>* 13 : Invalid method signature supplied<br/>* 16 : There was a temporary error processing your request. Please try again<br/>* 17 : Login required - Requested profile might not have privacy set to public.<br/>* 26 : Suspended API key - Access for your account has been suspended, please contact Last.fm<br/>* 29 : Rate limit exceeded - Your IP has made too many requests in a short period<br/><br/>## Examples¶<br/><br/>Example Response <br/><br/>\| Parameter \| Value            \|<br/>\| --------- \| ---------------- \|<br/>\| user      \| TyphoonasNorABot \|<br/>\| limit     \| 1                \|<br/>\| api\_key  \| YOUR\_API\_KEY   \|<br/>\| format    \| json             \|<br/><br/>HTTP status: `200 OK`<br/><br/>`https://ws.audioscrobbler.com/2.0/?method=user.getLovedTracks&user=TyphoonsNotABot&limit=1&api_key=YOUR_API_KEY&format=json<br/>`<br/><br/>`  \{<br/>    "lovedtracks": \{<br/>      "@attr": \{<br/>        "page": "1",<br/>        "total": "7790",<br/>        "user": "TyphoonsNotABot",<br/>        "perPage": "1",<br/>        "totalPages": "7790"<br/>      \},<br/>      "track": [<br/>        \{<br/>          "artist": \{<br/>            "url": "https://www.last.fm/music/The+Backseat+Lovers",<br/>            "name": "The Backseat Lovers",<br/>            "mbid": ""<br/>          \},<br/>          "mbid": "59da79dd-aed6-447c-951c-070f6b8446a1",<br/>          "date": \{<br/>            "uts": "1603112664",<br/>            "#text": "19 Oct 2020, 13:04"<br/>          \},<br/>          "url": "https://www.last.fm/music/The+Backseat+Lovers/_/Davy+Crochet",<br/>          "image": [<br/>            \{<br/>              "size": "small",<br/>              "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>            \},<br/>            \{<br/>              "size": "medium",<br/>              "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>            \},<br/>            \{<br/>              "size": "large",<br/>              "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>            \},<br/>            \{<br/>              "size": "extralarge",<br/>              "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>            \}<br/>          ],<br/>          "name": "Davy Crochet",<br/>          "streamable": \{<br/>            "fulltrack": "0",<br/>            "#text": "0"<br/>          \}<br/>        \}<br/>      ]<br/>    \}<br/>  \}<br/>`<br/><br/>Example Response of a user that doesn't exist <br/><br/>HTTP status: `404 NOT FOUND`<br/><br/>`https://ws.audioscrobbler.com/2.0/?api_key=YOUR_API_KEY&method=User.getlovedtracks&user=userthatdoesntexist&format=json<br/>`<br/><br/>`\{<br/>    "error": 6,<br/>    "message": "User not found"<br/>\}<br/>`<br/><br/> Made with Material for MkDocs |
| getTopTracks - Unofficial Last.fm API docs | https://lastfm-docs.github.io/api-docs/user/getTopTracks/ | Skip to content <br/><br/> Unofficial Last.fm API docs <br/><br/> getTopTracks <br/><br/> Initializing search<br/><br/> lastfm-docs/api-docs <br/><br/> Unofficial Last.fm API docs <br/><br/> lastfm-docs/api-docs <br/><br/>* Introduction<br/>* Bugs<br/>* Error Codes<br/>* Album  <br/> Album  <br/>   * getInfo  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* Artist  <br/> Artist  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopAlbums  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * Search<br/>* Auth  <br/> Auth  <br/>   * Desktop  <br/>   * getSession  <br/>   * getToken  <br/>   * Signature<br/>* Chart  <br/> Chart  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks<br/>* Geo  <br/> Geo  <br/>   * getTopArtists  <br/>   * getTopTracks<br/>* Library  <br/> Library  <br/>   * getArtists<br/>* Tag  <br/> Tag  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * getWeeklyChartList<br/>* Track  <br/> Track  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* User  <br/> User  <br/>   * getFriends  <br/>   * getInfo  <br/>   * getLovedTracks  <br/>   * getPersonalTags  <br/>   * getRecentTracks  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  getTopTracks  <br/>    Table of contents  <br/>         * Parameters  <br/>         * Responses  <br/>         * Examples  <br/>   * getWeeklyAlbumChart  <br/>   * getWeeklyArtistChart  <br/>   * getWeeklyChartList  <br/>   * getWeeklyTrackChart<br/><br/> Table of contents <br/>* Parameters<br/>* Responses<br/>* Examples<br/><br/># getTopTracks<br/><br/>Get the top tracks listened to by a user. You can stipulate a time period. Sends the overall chart by default.<br/><br/>No authentication required.<br/><br/>## Parameters¶<br/><br/>\| Method   \| Type                                                                                                \| Default \| Required                                                                                                        \| Description                                                                                                     \|<br/>\| -------- \| --------------------------------------------------------------------------------------------------- \| ------- \| --------------------------------------------------------------------------------------------------------------- \| --------------------------------------------------------------------------------------------------------------- \|<br/>\| user     \| [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/String) \| none    \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| The Last.fm username to fetch top tracks for.                                                                   \|<br/>\| period   \| [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/String) \| overall \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The time period over which to retrieve top albums for. Can be overall, 7day, 1month, 3month, 6month or 12month. \|<br/>\| limit    \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number) \| 50      \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The number of results to fetch per page.                                                                        \|<br/>\| page     \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number) \| 1       \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The page number to fetch.                                                                                       \|<br/>\| api\_key \| [key](https://www.last.fm/api/account/create)                                                       \| none    \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| A Last.fm API key.                                                                                              \|<br/><br/>## Responses¶<br/><br/>Errors:<br/><br/>* 6 : Invalid parameters - Your request was either missing a required parameter, the parameter was not found, or had 0 results<br/>* 8 : Operation failed - Something else went wrong<br/>* 9 : Invalid session key - Please re-authenticate<br/>* 10 : Invalid API key - You must be granted a valid key by last.fm<br/>* 11 : Service Offline - This service is temporarily offline. Try again later.<br/>* 13 : Invalid method signature supplied<br/>* 16 : There was a temporary error processing your request. Please try again<br/>* 26 : Suspended API key - Access for your account has been suspended, please contact Last.fm<br/>* 29 : Rate limit exceeded - Your IP has made too many requests in a short period<br/><br/>## Examples¶<br/><br/>Example response <br/><br/>\| Parameter \| Value          \|<br/>\| --------- \| -------------- \|<br/>\| user      \| aidan-         \|<br/>\| limit     \| 3              \|<br/>\| api\_key  \| YOUR\_API\_KEY \|<br/>\| format    \| json           \|<br/><br/>HTTP status: `200 OK`<br/><br/>`https://ws.audioscrobbler.com/2.0/?method=user.getTopTracks&user=aidan-&limit=3&api_key=YOUR_API_KEY&format=json<br/>`<br/><br/>`\{<br/>    "toptracks": \{<br/>        "@attr": \{<br/>            "page": "1",<br/>            "total": "5171",<br/>            "user": "aidan-",<br/>            "perPage": "3",<br/>            "totalPages": "1724"<br/>        \},<br/>        "track": [<br/>            \{<br/>                "@attr": \{<br/>                    "rank": "1"<br/>                \},<br/>                "duration": "205",<br/>                "playcount": "440",<br/>                "artist": \{<br/>                    "url": "https://www.last.fm/music/Joy+Division",<br/>                    "name": "Joy Division",<br/>                    "mbid": "9a58fda3-f4ed-4080-a3a5-f457aac9fcdd"<br/>                \},<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \}<br/>                ],<br/>                "streamable": \{<br/>                    "fulltrack": "0",<br/>                    "#text": "0"<br/>                \},<br/>                "mbid": "00046764-a84c-3568-b8b1-6a8174f7ca0b",<br/>                "name": "Love Will Tear Us Apart",<br/>                "url": "https://www.last.fm/music/Joy+Division/_/Love+Will+Tear+Us+Apart"<br/>            \},<br/>            \{<br/>                "@attr": \{<br/>                    "rank": "2"<br/>                \},<br/>                "duration": "222",<br/>                "playcount": "399",<br/>                "artist": \{<br/>                    "url": "https://www.last.fm/music/Videoclub",<br/>                    "name": "Videoclub",<br/>                    "mbid": "f4903035-e9cd-4b7f-b462-0447b0cd490a"<br/>                \},<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \}<br/>                ],<br/>                "streamable": \{<br/>                    "fulltrack": "0",<br/>                    "#text": "0"<br/>                \},<br/>                "mbid": "f2d3087b-913d-41e4-aa94-0c207fd30d1d",<br/>                "name": "Roi",<br/>                "url": "https://www.last.fm/music/Videoclub/_/Roi"<br/>            \},<br/>            \{<br/>                "@attr": \{<br/>                    "rank": "3"<br/>                \},<br/>                "duration": "193",<br/>                "playcount": "352",<br/>                "artist": \{<br/>                    "url": "https://www.last.fm/music/Clara+Luciani",<br/>                    "name": "Clara Luciani",<br/>                    "mbid": "a6386935-e6ee-4aaa-aaa8-70f56b79bc29"<br/>                \},<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                    \}<br/>                ],<br/>                "streamable": \{<br/>                    "fulltrack": "0",<br/>                    "#text": "0"<br/>                \},<br/>                "mbid": "03b34579-3c04-4c34-a203-728500e95f52",<br/>                "name": "La grenade",<br/>                "url": "https://www.last.fm/music/Clara+Luciani/_/La+grenade"<br/>            \}<br/>        ]<br/>    \}<br/>\}<br/>`<br/><br/> Made with Material for MkDocs |
| getRecentTracks - Unofficial Last.fm API docs | https://lastfm-docs.github.io/api-docs/user/getRecentTracks/ | Skip to content <br/><br/> Unofficial Last.fm API docs <br/><br/> getRecentTracks <br/><br/> Initializing search<br/><br/> lastfm-docs/api-docs <br/><br/> Unofficial Last.fm API docs <br/><br/> lastfm-docs/api-docs <br/><br/>* Introduction<br/>* Bugs<br/>* Error Codes<br/>* Album  <br/> Album  <br/>   * getInfo  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* Artist  <br/> Artist  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopAlbums  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * Search<br/>* Auth  <br/> Auth  <br/>   * Desktop  <br/>   * getSession  <br/>   * getToken  <br/>   * Signature<br/>* Chart  <br/> Chart  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks<br/>* Geo  <br/> Geo  <br/>   * getTopArtists  <br/>   * getTopTracks<br/>* Library  <br/> Library  <br/>   * getArtists<br/>* Tag  <br/> Tag  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * getWeeklyChartList<br/>* Track  <br/> Track  <br/>   * getCorrection  <br/>   * getInfo  <br/>   * getSimilar  <br/>   * getTags  <br/>   * getTopTags  <br/>   * Search<br/>* User  <br/> User  <br/>   * getFriends  <br/>   * getInfo  <br/>   * getLovedTracks  <br/>   * getPersonalTags  <br/>   * getRecentTracks  getRecentTracks  <br/>    Table of contents  <br/>         * Parameters  <br/>         * Responses  <br/>         * Examples  <br/>   * getTopAlbums  <br/>   * getTopArtists  <br/>   * getTopTags  <br/>   * getTopTracks  <br/>   * getWeeklyAlbumChart  <br/>   * getWeeklyArtistChart  <br/>   * getWeeklyChartList  <br/>   * getWeeklyTrackChart<br/><br/> Table of contents <br/>* Parameters<br/>* Responses<br/>* Examples<br/><br/># getRecentTracks<br/><br/>Returns a list of the tracks recently scrobbled by this user. Adds a `nowplaying` flag with a boolean value if the user is currently scrobbling.<br/><br/>No authentication required.<br/><br/>## Parameters¶<br/><br/>\| Method   \| Type                                                                                                  \| Default                \| Required                                                                                                        \| Description                                                                                                                     \|<br/>\| -------- \| ----------------------------------------------------------------------------------------------------- \| ---------------------- \| --------------------------------------------------------------------------------------------------------------- \| ------------------------------------------------------------------------------------------------------------------------------- \|<br/>\| user     \| [string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/String)   \| none                   \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| The Last.fm username to fetch the recent tracks of.                                                                             \|<br/>\| limit    \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number)   \| 50                     \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The number of results to fetch per page. Maximum is 1000\. One track is added when the user is currently listening.             \|<br/>\| page     \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number)   \| 1                      \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| The page number to fetch.                                                                                                       \|<br/>\| from     \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number)   \| 0000000000             \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| Beginning timestamp of a range - only display scrobbles after this time, in UNIX timestamp format. Timezone is UTC.             \|<br/>\| to       \| [number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Number)   \| current UNIX timestamp \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| End timestamp of a range - only display scrobbles before this time, in UNIX timestamp format (num of seconds). Timezone is UTC. \|<br/>\| extended \| [boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global%5FObjects/Boolean) \| 0                      \| ![❎](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/274e.png ":negative_squared_cross_mark:") \| Whether to include extra data. This data is artist info and if the user has loved a track. Changes the output format.           \|<br/>\| api\_key \| [key](https://www.last.fm/api/account/create)                                                         \| none                   \| ![✅](https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2705.png ":white_check_mark:")            \| A Last.fm API key.                                                                                                              \|<br/><br/>// Add auth docs<br/><br/>## Responses¶<br/><br/>Errors:<br/><br/>* 6 : Invalid parameters - Your request is missing a required parameter<br/>* 8 : Operation failed - Something else went wrong<br/>* 9 : Invalid session key - Please re-authenticate<br/>* 10 : Invalid API key - You must be granted a valid key by last.fm<br/>* 11 : Service Offline - This service is temporarily offline. Try again later.<br/>* 13 : Invalid method signature supplied<br/>* 16 : There was a temporary error processing your request. Please try again<br/>* 17 : Login required - Requested profile might not have privacy set to public.<br/>* 26 : Suspended API key - Access for your account has been suspended, please contact Last.fm<br/>* 29 : Rate limit exceeded - Your IP has made too many requests in a short period<br/><br/>## Examples¶<br/><br/>Example response of a user currently not scrobbling <br/><br/>\| Parameter \| Value       \|<br/>\| --------- \| ----------- \|<br/>\| username  \| frikandel\_ \|<br/>\| limit     \| 1           \|<br/>\| extended  \| 1           \|<br/>\| format    \| json        \|<br/><br/>HTTP status: `200 OK`<br/><br/>`https://ws.audioscrobbler.com/2.0/?api_key=YOUR_API_KEY&method=User.getrecenttracks&user=frikandel_&format=json&limit=1<br/>`<br/><br/>`\{<br/>    "recenttracks": \{<br/>        "@attr": \{<br/>            "page": "1",<br/>            "total": "94618",<br/>            "user": "frikandel_",<br/>            "perPage": "1",<br/>            "totalPages": "94618"<br/>        \},<br/>        "track": [<br/>            \{<br/>                "artist": \{<br/>                    "mbid": "63aa26c3-d59b-4da4-84ac-716b54f1ef4d",<br/>                    "#text": "Tame Impala"<br/>                \},<br/>                "album": \{<br/>                    "mbid": "0d2cb66c-3a32-4f81-b977-9231c461c34a",<br/>                    "#text": "Lonerism"<br/>                \},<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \}<br/>                ],<br/>                "streamable": "0",<br/>                "date": \{<br/>                    "uts": "1603188238",<br/>                    "#text": "20 Oct 2020, 10:03"<br/>                \},<br/>                "url": "https://www.last.fm/music/Tame+Impala/_/Feels+Like+We+Only+Go+Backwards",<br/>                "name": "Feels Like We Only Go Backwards",<br/>                "mbid": "1587517a-9b2b-385a-b044-673fddf88004"<br/>            \}<br/>        ]<br/>    \}<br/>\}<br/>`<br/><br/>Example response of a user currently scrobbling <br/><br/>\| Parameter \| Value          \|<br/>\| --------- \| -------------- \|<br/>\| user      \| frikandel\_    \|<br/>\| limit     \| 1              \|<br/>\| extended  \| 1              \|<br/>\| api\_key  \| YOUR\_API\_KEY \|<br/>\| format    \| json           \|<br/><br/>HTTP status: `200 OK`<br/><br/>`https://ws.audioscrobbler.com/2.0/?method=user.getRecentTracks&user=frikandel_&limit=1&extended=1&api_key=YOUR_API_KEY&format=json<br/>`<br/><br/>`\{<br/>    "recenttracks": \{<br/>        "@attr": \{<br/>            "page": "1",<br/>            "total": "94613",<br/>            "user": "frikandel_",<br/>            "perPage": "1",<br/>            "totalPages": "94613"<br/>        \},<br/>        "track": [<br/>            \{<br/>                "@attr": \{<br/>                    "nowplaying": "true"<br/>                \},<br/>                "artist": \{<br/>                    "url": "https://www.last.fm/music/Tame+Impala",<br/>                    "mbid": "",<br/>                    "image": [<br/>                        \{<br/>                            "size": "small",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "medium",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "large",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "extralarge",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \}<br/>                    ],<br/>                    "name": "Tame Impala"<br/>                \},<br/>                "mbid": "08b8e930-fa2d-454d-a659-069df6111a02",<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \}<br/>                ],<br/>                "url": "https://www.last.fm/music/Tame+Impala/_/Apocalypse+Dreams",<br/>                "streamable": "0",<br/>                "album": \{<br/>                    "mbid": "0d2cb66c-3a32-4f81-b977-9231c461c34a",<br/>                    "#text": "Lonerism"<br/>                \},<br/>                "name": "Apocalypse Dreams",<br/>                "loved": "0"<br/>            \},<br/>            \{<br/>                "mbid": "0632aa27-3c1f-4ca9-ae87-e656ce677bfe",<br/>                "loved": "0",<br/>                "artist": \{<br/>                    "url": "https://www.last.fm/music/Tame+Impala",<br/>                    "mbid": "",<br/>                    "image": [<br/>                        \{<br/>                            "size": "small",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/34s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "medium",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/64s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "large",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/174s/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \},<br/>                        \{<br/>                            "size": "extralarge",<br/>                            "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"<br/>                        \}<br/>                    ],<br/>                    "name": "Tame Impala"<br/>                \},<br/>                "image": [<br/>                    \{<br/>                        "size": "small",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/34s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "medium",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/64s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "large",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/174s/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \},<br/>                    \{<br/>                        "size": "extralarge",<br/>                        "#text": "https://lastfm.freetls.fastly.net/i/u/300x300/7c9c4d1009514b178c82f2201e3a1fce.jpg"<br/>                    \}<br/>                ],<br/>                "date": \{<br/>                    "uts": "1603186824",<br/>                    "#text": "20 Oct 2020, 09:40"<br/>                \},<br/>                "streamable": "0",<br/>                "url": "https://www.last.fm/music/Tame+Impala/_/Endors+Toi",<br/>                "name": "Endors Toi",<br/>                "album": \{<br/>                    "mbid": "0d2cb66c-3a32-4f81-b977-9231c461c34a",<br/>                    "#text": "Lonerism"<br/>                \}<br/>            \}<br/>        ]<br/>    \}<br/>\}<br/>`<br/><br/>Example response of non existing user <br/><br/>HTTP status: `404 NOT FOUND`<br/><br/>`https://ws.audioscrobbler.com/2.0/?api_key=YOUR_API_KEY&method=User.getrecenttracks&user=userthatdoesntexist&format=json<br/>`<br/><br/>`\{<br/>    "error": 6,<br/>    "message": "User not found"<br/>\}<br/>`<br/><br/>Example response of user with 'Hide recent listening information' enabled <br/><br/>HTTP status: `403 FORBIDDEN`<br/><br/>`https://ws.audioscrobbler.com/2.0/?YOUR_API_KEY=censored&method=User.getrecenttracks&user=frikandel_&format=json<br/>`<br/><br/>`\{<br/>    "error": 17,<br/>    "message": "Login: User required to be logged in"<br/>\}<br/>`<br/><br/>// Add auth docs<br/><br/> Made with Material for MkDocs |

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! Now I have a clear understanding of what I need to do:

1. I found that Last.fm has a `user.getLovedTracks` API method that gets the tracks a user has "loved" on Last.fm
2. I can see that the current app has user data stored with `lastFmUserName` field
3. I need to:
   - Add a `getUserLovedTracks` method to the `useLastFmApi` composable
   - Add functionality to the AlbumView to fetch the user's loved tracks
   - Cross-reference the album tracks with the loved tracks to count how many are loved
   - Display this information in the AlbumView

Let me start by adding the `getUserLovedTracks` method to the Last.fm API composable:</details></think>

---

Now I'll implement the Last.fm loved tracks functionality for the AlbumView. First, I'll add the `getUserLovedTracks` method to the Last.fm API composable, and then integrate it into the AlbumView to show how many tracks from the album are loved.

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/composables/useLastFmApi.js</summary>

I will add a getUserLovedTracks method to the useLastFmApi composable and include it in the return statement

**Chunk 1**
Lines added: 15, lines removed: undefined

```diff
@@ -184,4 +184,19 @@
      return makeRequest('artist.search', { artist, limit });
    };
+ 
+   /**
+    * Gets user's loved tracks
+    * @param {string} username - The Last.fm username
+    * @param {number} limit - Number of results to return (default: 50, max: 1000)
+    * @param {number} page - Page number to fetch (default: 1)
+    * @returns {Promise&lt;Object&gt;} User's loved tracks data
+    */
+   const getUserLovedTracks = async (username, limit = 50, page = 1) =&gt; {
+     return makeRequest('user.getlovedtracks', { 
+       user: username, 
+       limit, 
+       page 
+     });
+   };
  
    return {
```

**Chunk 2**
Lines added: 1, lines removed: undefined

```diff
@@ -199,4 +214,5 @@
      searchAlbums,
      searchArtists,
+     getUserLovedTracks,
    };
  } 
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! Now I've added the `getUserLovedTracks` method to the Last.fm API composable. Next, I need to modify the AlbumView to:

1. Import the user data composable to get the user's Last.fm username
2. Import the Last.fm API composable 
3. Add functionality to fetch the user's loved tracks
4. Create a function to count how many tracks from the current album are in the user's loved tracks
5. Display this information in the template

Let me implement this step by step.</details></think>

---

Now I'll update the AlbumView to integrate the loved tracks functionality:

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add Last.fm loved tracks functionality to the AlbumView by importing useLastFmApi and useUserData, adding reactive variables to track loved tracks data, and creating functions to fetch and count loved tracks for the album

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -8,4 +8,6 @@
  import { db } from '@/firebase';
  import { useAlbumMappings } from '@composables/useAlbumMappings';
+ import { useLastFmApi } from '@composables/useLastFmApi';
+ import { useUserData } from '@composables/useUserData';
  import BackButton from '@components/common/BackButton.vue';
  import BaseButton from '@components/common/BaseButton.vue';
```

**Chunk 2**
Lines added: 2, lines removed: undefined

```diff
@@ -19,4 +21,6 @@
  const router = useRouter();
  const user = useCurrentUser();
+ const { userData } = useUserData();
+ const { getUserLovedTracks } = useLastFmApi();
  const { fetchUserAlbumData, getCurrentPlaylistInfo, searchAlbumsByTitleAndArtistFuzzy, addAlbumToCollection, updateAlbumDetails } = useAlbumsData();
  const { getAlbum, getAlbumTracks, getPlaylistAlbumsWithDates} = useSpotifyApi();
```

**Chunk 3**
Lines added: 6, lines removed: undefined

```diff
@@ -38,4 +42,10 @@
  const primaryAlbumId = ref(null);
  const albumExists = ref(false);
+ 
+ // Last.fm loved tracks data
+ const lovedTracks = ref([]);
+ const lovedTracksLoading = ref(false);
+ const lovedTracksError = ref(null);
+ const lovedTracksCount = ref(0);
  
  const checkIfNeedsUpdate = async () =&gt; {
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good! Now I need to add the functions to fetch and count loved tracks. Let me add these functions after the existing functions but before the onMounted hook.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add functions to fetch Last.fm loved tracks and calculate how many tracks from the current album are loved by the user, placing these functions after the existing handleCloseDialog function and before onMounted

**Chunk 1**
Lines added: 84, lines removed: undefined

```diff
@@ -303,4 +303,88 @@
    searchResults.value = [];
  };
+ 
+ /**
+  * Fetches all loved tracks for the current user from Last.fm
+  */
+ const fetchLovedTracks = async () =&gt; {
+   if (!userData.value?.lastFmUserName) {
+     return;
+   }
+ 
+   try {
+     lovedTracksLoading.value = true;
+     lovedTracksError.value = null;
+     
+     // Fetch loved tracks in batches (Last.fm API limit is 1000 per request)
+     let allLovedTracks = [];
+     let page = 1;
+     const limit = 1000;
+     
+     while (true) {
+       const response = await getUserLovedTracks(userData.value.lastFmUserName, limit, page);
+       const tracks = response.lovedtracks?.track || [];
+       
+       if (!Array.isArray(tracks)) {
+         // If it's a single track, convert to array
+         allLovedTracks.push(tracks);
+         break;
+       }
+       
+       allLovedTracks = [...allLovedTracks, ...tracks];
+       
+       // Check if we have more pages
+       const totalPages = parseInt(response.lovedtracks?.['@attr']?.totalPages || '0');
+       if (page &gt;= totalPages || tracks.length &lt; limit) {
+         break;
+       }
+       
+       page++;
+     }
+     
+     lovedTracks.value = allLovedTracks;
+     calculateLovedTracksCount();
+     
+   } catch (err) {
+     console.error('Error fetching loved tracks:', err);
+     lovedTracksError.value = err.message || 'Failed to fetch loved tracks';
+   } finally {
+     lovedTracksLoading.value = false;
+   }
+ };
+ 
+ /**
+  * Counts how many tracks from the current album are in the user's loved tracks
+  */
+ const calculateLovedTracksCount = () =&gt; {
+   if (!album.value || !tracks.value.length || !lovedTracks.value.length) {
+     lovedTracksCount.value = 0;
+     return;
+   }
+ 
+   const albumArtist = album.value.artists[0]?.name?.toLowerCase();
+   let count = 0;
+ 
+   tracks.value.forEach(track =&gt; {
+     const trackName = track.name.toLowerCase();
+     const trackArtists = track.artists.map(artist =&gt; artist.name.toLowerCase());
+ 
+     // Check if any track artist matches the album artist and track name matches
+     const isLoved = lovedTracks.value.some(lovedTrack =&gt; {
+       const lovedTrackName = lovedTrack.name?.toLowerCase();
+       const lovedArtistName = lovedTrack.artist?.name?.toLowerCase();
+       
+       // Match track name and artist
+       return lovedTrackName === trackName &amp;&amp; 
+              (lovedArtistName === albumArtist || 
+               trackArtists.some(trackArtist =&gt; trackArtist === lovedArtistName));
+     });
+ 
+     if (isLoved) {
+       count++;
+     }
+   });
+ 
+   lovedTracksCount.value = count;
+ };
  
  onMounted(async () =&gt; {
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to add a call to `fetchLovedTracks()` in the onMounted hook, and I also need to add the UI to display the loved tracks count in the template. Let me first update the onMounted function.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add the fetchLovedTracks call to the onMounted function after the existing album and track data has been loaded

**Chunk 1**
Lines added: 5, lines removed: undefined

```diff
@@ -417,4 +417,9 @@
        await checkIfNeedsUpdate();
      }
+     
+     // Fetch Last.fm loved tracks if user has Last.fm username
+     if (userData.value?.lastFmUserName) {
+       await fetchLovedTracks();
+     }
    } catch (err) {
      console.error('Error in AlbumView:', err);
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! Now I need to add the UI to display the loved tracks count. I'll add it in the album info section, probably after the release year and before the TrackList component.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add a section to display the Last.fm loved tracks count in the album info area, placing it after the release year and before the TrackList component

**Chunk 1**
Lines added: 29, lines removed: undefined

```diff
@@ -502,4 +502,33 @@
            &gt;{{ album.artists[0].name }}&lt;/p&gt;
            &lt;p class="text-xl text-delft-blue mb-6 font-bold"&gt;{{ album.release_date.substring(0, 4) }}&lt;/p&gt;
+           
+           &lt;!-- Last.fm Loved Tracks Info --&gt;
+           &lt;div v-if="userData?.lastFmUserName" class="mb-6"&gt;
+             &lt;div v-if="lovedTracksLoading" class="text-sm text-gray-600"&gt;
+               &lt;span class="animate-pulse"&gt;Loading loved tracks...&lt;/span&gt;
+             &lt;/div&gt;
+             &lt;div v-else-if="lovedTracksError" class="text-sm text-red-500"&gt;
+               &lt;span&gt;{{ lovedTracksError }}&lt;/span&gt;
+             &lt;/div&gt;
+             &lt;div v-else-if="lovedTracks.length &gt; 0" class="bg-mint bg-opacity-20 border border-mint rounded-lg p-4"&gt;
+               &lt;div class="flex items-center gap-2 mb-2"&gt;
+                 &lt;svg class="w-5 h-5 text-mint" fill="currentColor" viewBox="0 0 20 20"&gt;
+                   &lt;path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"&gt;&lt;/path&gt;
+                 &lt;/svg&gt;
+                 &lt;span class="font-semibold text-delft-blue"&gt;Last.fm Loved Tracks&lt;/span&gt;
+               &lt;/div&gt;
+               &lt;p class="text-delft-blue"&gt;
+                 &lt;span class="font-bold text-lg"&gt;{{ lovedTracksCount }}&lt;/span&gt; 
+                 {{ lovedTracksCount === 1 ? 'track' : 'tracks' }} from this album 
+                 {{ lovedTracksCount === 1 ? 'is' : 'are' }} in your loved tracks
+                 &lt;span v-if="tracks.length &gt; 0" class="text-sm text-gray-600"&gt;
+                   ({{ Math.round((lovedTracksCount / tracks.length) * 100) }}% of album)
+                 &lt;/span&gt;
+               &lt;/p&gt;
+             &lt;/div&gt;
+             &lt;div v-else-if="lovedTracks.length === 0" class="text-sm text-gray-600"&gt;
+               &lt;span&gt;No loved tracks found for {{ userData.lastFmUserName }}&lt;/span&gt;
+             &lt;/div&gt;
+           &lt;/div&gt;
            
            &lt;TrackList :tracks="tracks" /&gt;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! Now I have implemented the Last.fm loved tracks functionality in the AlbumView. Let me also add a watcher to recalculate the loved tracks count whenever the tracks change (in case they load asynchronously), and also handle edge cases better.

Let me add a watcher and also optimize the fetch function a bit more.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add a watcher to recalculate loved tracks count when tracks data changes, and import watch from Vue

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -1,4 +1,4 @@
  &lt;script setup&gt;
- import { ref, onMounted, computed } from 'vue';
+ import { ref, onMounted, computed, watch } from 'vue';
  import { useRoute, useRouter } from 'vue-router';
  import { useSpotifyApi } from '@composables/useSpotifyApi';
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now let me add the watcher to recalculate loved tracks count when tracks data changes:</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will add a watcher to recalculate the loved tracks count whenever tracks data changes, placing it after the calculateLovedTracksCount function and before onMounted

**Chunk 1**
Lines added: 7, lines removed: undefined

```diff
@@ -387,4 +387,11 @@
    lovedTracksCount.value = count;
  };
+ 
+ // Watch for changes to tracks data and recalculate loved tracks count
+ watch([tracks, lovedTracks], () =&gt; {
+   if (tracks.value.length &gt; 0 &amp;&amp; lovedTracks.value.length &gt; 0) {
+     calculateLovedTracksCount();
+   }
+ });
  
  onMounted(async () =&gt; {
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! Now let me also make a small improvement to make the loved tracks section more informative when there are no loved tracks but the user does have a Last.fm username configured. Let me update the display logic:</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will improve the display logic for when there are no loved tracks to be more informative and also show the count even when it's 0

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -518,5 +518,5 @@
                &lt;span&gt;{{ lovedTracksError }}&lt;/span&gt;
              &lt;/div&gt;
-             &lt;div v-else-if="lovedTracks.length &gt; 0" class="bg-mint bg-opacity-20 border border-mint rounded-lg p-4"&gt;
+             &lt;div v-else-if="!lovedTracksLoading" class="bg-mint bg-opacity-20 border border-mint rounded-lg p-4"&gt;
                &lt;div class="flex items-center gap-2 mb-2"&gt;
                  &lt;svg class="w-5 h-5 text-mint" fill="currentColor" viewBox="0 0 20 20"&gt;
```

**Chunk 2**
Lines added: 4, lines removed: 4

```diff
@@ -529,11 +529,11 @@
                  {{ lovedTracksCount === 1 ? 'track' : 'tracks' }} from this album 
                  {{ lovedTracksCount === 1 ? 'is' : 'are' }} in your loved tracks
-                 &lt;span v-if="tracks.length &gt; 0" class="text-sm text-gray-600"&gt;
+                 &lt;span v-if="tracks.length &gt; 0 &amp;&amp; lovedTracksCount &gt; 0" class="text-sm text-gray-600"&gt;
                    ({{ Math.round((lovedTracksCount / tracks.length) * 100) }}% of album)
                  &lt;/span&gt;
                &lt;/p&gt;
-             &lt;/div&gt;
-             &lt;div v-else-if="lovedTracks.length === 0" class="text-sm text-gray-600"&gt;
-               &lt;span&gt;No loved tracks found for {{ userData.lastFmUserName }}&lt;/span&gt;
+               &lt;p v-if="lovedTracks.length === 0" class="text-sm text-gray-600 mt-1"&gt;
+                 No loved tracks found for {{ userData.lastFmUserName }}
+               &lt;/p&gt;
              &lt;/div&gt;
            &lt;/div&gt;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Excellent! Now let me also optimize the loved tracks fetching function to handle edge cases better. I want to make sure it handles the case where the user might have a large number of loved tracks (potentially thousands) more efficiently by adding some error handling and maybe limiting the initial fetch to a reasonable number.

Let me make a final improvement to the `fetchLovedTracks` function:</details></think>

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will optimize the fetchLovedTracks function to handle large numbers of loved tracks more efficiently and add better error handling

**Chunk 1**
Lines added: 14, lines removed: 2

```diff
@@ -320,8 +320,20 @@
      let page = 1;
      const limit = 1000;
+     const maxPages = 10; // Limit to first 10,000 loved tracks for performance
      
-     while (true) {
+     while (page &lt;= maxPages) {
        const response = await getUserLovedTracks(userData.value.lastFmUserName, limit, page);
-       const tracks = response.lovedtracks?.track || [];
+       
+       if (!response.lovedtracks) {
+         // No loved tracks data returned
+         break;
+       }
+       
+       const tracks = response.lovedtracks.track || [];
+       
+       if (!tracks || tracks.length === 0) {
+         // No more tracks
+         break;
+       }
        
        if (!Array.isArray(tracks)) {
```

**Chunk 2**
Lines added: 1, lines removed: 1

```diff
@@ -334,5 +346,5 @@
        
        // Check if we have more pages
-       const totalPages = parseInt(response.lovedtracks?.['@attr']?.totalPages || '0');
+       const totalPages = parseInt(response.lovedtracks['@attr']?.totalPages || '0');
        if (page &gt;= totalPages || tracks.length &lt; limit) {
          break;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Perfect! I've successfully implemented the Last.fm loved tracks functionality for the AlbumView. Let me summarize what I've added:

1. **Added `getUserLovedTracks` method** to the `useLastFmApi` composable
2. **Enhanced AlbumView** with:
   - Import of `useLastFmApi` and `useUserData` composables
   - Reactive variables for loved tracks data (`lovedTracks`, `lovedTracksLoading`, `lovedTracksError`, `lovedTracksCount`)
   - `fetchLovedTracks()` function that fetches all user's loved tracks from Last.fm API (with pagination support and performance limits)
   - `calculateLovedTracksCount()` function that matches album tracks with loved tracks
   - Watcher to recalculate count when data changes
   - UI section to display the loved tracks information

3. **User Experience Features**:
   - Shows loading state while fetching loved tracks
   - Displays error messages if API calls fail
   - Shows the count of loved tracks from the current album
   - Shows percentage of album tracks that are loved
   - Only shows the section if user has a Last.fm username configured
   - Handles edge cases like no loved tracks found

The functionality will only appear for users who have configured their Last.fm username in their account settings, and it will show how many tracks from the current album are in their Last.fm loved tracks collection.

Let me test this functionality by running the development server to make sure everything works correctly.</details></think>

---

Perfect! I've successfully implemented the Last.fm loved tracks functionality for the AlbumView. Here's what has been added:

## New Features Added:

### In `useLastFmApi` composable:
- **`getUserLovedTracks()`** method to fetch user's loved tracks from Last.fm API

### In `AlbumView` component:
- **Data fetching**: Automatically fetches all user's loved tracks when the component loads (if user has Last.fm username configured)
- **Track matching**: Compares album tracks with loved tracks to count matches
- **Smart pagination**: Handles large collections of loved tracks (up to 10,000 for performance)
- **UI display**: Shows a nice card with:
  - Number of tracks from the current album that are loved
  - Percentage of album tracks that are loved
  - Loading states and error handling
  - Heart icon for visual appeal

### Key Features:
- **Automatic loading**: Fetches loved tracks data when album loads
- **Performance optimized**: Limits to first 10,000 loved tracks to prevent slowdowns
- **Error handling**: Graceful fallback when API calls fail
- **Responsive design**: Matches the app's design system using mint green theme
- **User-specific**: Only shows for users with Last.fm username configured
- **Real-time updates**: Recalculates count when track data changes

The feature will now display in the AlbumView for users who have set up their Last.fm username in their account settings, showing them exactly how many tracks from any given album they've loved on Last.fm!

---

_**User (2025-06-29 18:39Z)**_

can you add the hearts to the tracklist?

---

_**Agent (mode Agent)**_

<think><details><summary>Thought Process</summary>
The user wants me to add hearts to the track list to indicate which individual tracks are loved on Last.fm. This means I need to:

1. Look at the TrackList component to see how it's structured
2. Modify it to accept loved tracks data and show heart icons for tracks that are loved
3. Pass the loved tracks data from AlbumView to TrackList
4. Update the track matching logic to identify which specific tracks are loved

Let me first look at the TrackList component to understand its current structure.</details></think>

---

I'll add hearts to the individual tracks in the tracklist to show which specific tracks are loved on Last.fm. First, let me examine the TrackList component to understand its current structure.

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: src/components/TrackList.vue</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I can see the TrackList component structure. I need to:

1. Add new props to accept loved tracks data
2. Create a function to determine if a track is loved
3. Add heart icons to the track list items for loved tracks
4. Update the AlbumView to pass the loved tracks data to TrackList

Let me start by updating the TrackList component to accept loved tracks data and show hearts for loved tracks.</details></think>

---

Now I'll update the TrackList component to show hearts for loved tracks and then modify the AlbumView to pass the loved tracks data.

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/components/TrackList.vue</summary>

I will update the TrackList component to accept loved tracks data and show heart icons for tracks that are loved on Last.fm

**Chunk 1**
Lines added: 8, lines removed: undefined

```diff
@@ -4,4 +4,12 @@
      type: Array,
      required: true
+   },
+   lovedTracks: {
+     type: Array,
+     default: () =&gt; []
+   },
+   albumArtist: {
+     type: String,
+     default: ''
    }
  });
```

**Chunk 2**
Lines added: 23, lines removed: undefined

```diff
@@ -12,4 +20,27 @@
    return &#96;${minutes}:${seconds.toString().padStart(2, '0')}&#96;;
  };
+ 
+ /**
+  * Check if a track is in the user's loved tracks
+  */
+ const isTrackLoved = (track) =&gt; {
+   if (!props.lovedTracks.length || !props.albumArtist) {
+     return false;
+   }
+ 
+   const trackName = track.name.toLowerCase();
+   const trackArtists = track.artists.map(artist =&gt; artist.name.toLowerCase());
+   const albumArtistLower = props.albumArtist.toLowerCase();
+ 
+   return props.lovedTracks.some(lovedTrack =&gt; {
+     const lovedTrackName = lovedTrack.name?.toLowerCase();
+     const lovedArtistName = lovedTrack.artist?.name?.toLowerCase();
+     
+     // Match track name and artist
+     return lovedTrackName === trackName &amp;&amp; 
+            (lovedArtistName === albumArtistLower || 
+             trackArtists.some(trackArtist =&gt; trackArtist === lovedArtistName));
+   });
+ };
  &lt;/script&gt;
  
```

**Chunk 3**
Lines added: 11, lines removed: 2

```diff
@@ -23,7 +54,16 @@
          class="flex justify-between items-center text-delft-blue"
        &gt;
-         &lt;span class="flex-1"&gt;
+         &lt;span class="flex-1 flex items-center"&gt;
            &lt;span class="mr-2"&gt;{{ index + 1 }}.&lt;/span&gt;
-           {{ track.name }}
+           &lt;span class="flex-1"&gt;{{ track.name }}&lt;/span&gt;
+           &lt;svg 
+             v-if="isTrackLoved(track)" 
+             class="w-4 h-4 text-red-500 ml-2 flex-shrink-0" 
+             fill="currentColor" 
+             viewBox="0 0 20 20"
+             title="Loved on Last.fm"
+           &gt;
+             &lt;path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"&gt;&lt;/path&gt;
+           &lt;/svg&gt;
          &lt;/span&gt;
          &lt;span class="ml-4"&gt;{{ formatDuration(track.duration_ms) }}&lt;/span&gt;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to update the AlbumView to pass the loved tracks data and album artist to the TrackList component. I need to find where TrackList is used in the AlbumView template and add the new props.</details></think>

---

Now I'll update the AlbumView to pass the loved tracks data and album artist to the TrackList component:

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/views/music/AlbumView.vue</summary>

I will update the TrackList component usage in AlbumView to pass the loved tracks data and album artist so individual tracks can show heart icons when they are loved

**Chunk 1**
Lines added: 5, lines removed: 1

```diff
@@ -551,5 +551,9 @@
            &lt;/div&gt;
            
-           &lt;TrackList :tracks="tracks" /&gt;
+           &lt;TrackList 
+             :tracks="tracks" 
+             :lovedTracks="lovedTracks"
+             :albumArtist="album.artists[0]?.name || ''"
+           /&gt;
          &lt;/div&gt;
        &lt;/div&gt;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! I've successfully implemented hearts for individual tracks in the tracklist. Let me also optimize the track matching logic to handle different track variations better and add some additional features.

I should also consider adding a computed property to improve performance since the track matching is being done for every track on every render. Let me optimize the TrackList component a bit more.</details></think>

---

Let me optimize the TrackList component to improve performance by creating a computed property for loved track names:

---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/components/TrackList.vue</summary>

I will optimize the performance by creating a computed property for loved track lookups and also improve the track matching logic to handle edge cases better

**Chunk 1**
Lines added: 2, lines removed: undefined

```diff
@@ -1,3 +1,5 @@
  &lt;script setup&gt;
+ import { computed } from 'vue';
+ 
  const props = defineProps({
    tracks: {
```

**Chunk 2**
Lines added: 26, lines removed: 1

```diff
@@ -20,10 +22,35 @@
    return &#96;${minutes}:${seconds.toString().padStart(2, '0')}&#96;;
  };
+ 
+ /**
+  * Create a lookup map of loved tracks for better performance
+  */
+ const lovedTracksLookup = computed(() =&gt; {
+   if (!props.lovedTracks.length) return new Set();
+   
+   const lookup = new Set();
+   const albumArtistLower = props.albumArtist.toLowerCase();
+   
+   props.lovedTracks.forEach(lovedTrack =&gt; {
+     const trackName = lovedTrack.name?.toLowerCase();
+     const artistName = lovedTrack.artist?.name?.toLowerCase();
+     
+     if (trackName &amp;&amp; artistName) {
+       // Create lookup keys for different artist combinations
+       lookup.add(&#96;${trackName}|${artistName}&#96;);
+       if (artistName === albumArtistLower) {
+         lookup.add(&#96;${trackName}|${albumArtistLower}&#96;);
+       }
+     }
+   });
+   
+   return lookup;
+ });
  
  /**
   * Check if a track is in the user's loved tracks
   */
  const isTrackLoved = (track) =&gt; {
-   if (!props.lovedTracks.length || !props.albumArtist) {
+   if (!lovedTracksLookup.value.size || !props.albumArtist) {
      return false;
    }
```

**Chunk 3**
Lines added: 9, lines removed: 9

```diff
@@ -33,13 +60,13 @@
    const albumArtistLower = props.albumArtist.toLowerCase();
  
-   return props.lovedTracks.some(lovedTrack =&gt; {
-     const lovedTrackName = lovedTrack.name?.toLowerCase();
-     const lovedArtistName = lovedTrack.artist?.name?.toLowerCase();
-     
-     // Match track name and artist
-     return lovedTrackName === trackName &amp;&amp; 
-            (lovedArtistName === albumArtistLower || 
-             trackArtists.some(trackArtist =&gt; trackArtist === lovedArtistName));
-   });
+   // Check against album artist first (most common case)
+   if (lovedTracksLookup.value.has(&#96;${trackName}|${albumArtistLower}&#96;)) {
+     return true;
+   }
+ 
+   // Check against all track artists
+   return trackArtists.some(artistName =&gt; 
+     lovedTracksLookup.value.has(&#96;${trackName}|${artistName}&#96;)
+   );
  };
  &lt;/script&gt;
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! I've successfully implemented hearts for individual tracks in the tracklist. Here's what I've accomplished:

1. **Updated TrackList component**:
   - Added new props: `lovedTracks` (array of loved tracks from Last.fm) and `albumArtist` (album artist name)
   - Created an optimized lookup system using a computed property with a Set for O(1) lookup performance
   - Added heart icons (SVG) that appear next to track names for loved tracks
   - Used proper flexbox layout to ensure hearts don't break the layout

2. **Updated AlbumView**:
   - Modified the TrackList component usage to pass the loved tracks data and album artist

3. **Performance optimizations**:
   - Used computed property for loved tracks lookup to avoid recalculating on every render
   - Created a Set-based lookup for O(1) performance instead of O(n) array searches
   - Optimized track matching to check album artist first (most common case)

4. **Visual design**:
   - Used red heart icons to clearly indicate loved tracks
   - Added proper spacing and flex layout to prevent layout breaks
   - Added tooltip/title attribute for accessibility

The hearts will now appear next to individual track names in the track list when those specific tracks are in the user's Last.fm loved tracks collection. This provides a much more granular view of which tracks the user has loved, complementing the overall album statistics shown above the track list.</details></think>

---

Perfect! I've successfully added hearts to the individual tracks in the tracklist. Here's what I implemented:

## New Features Added:

### Updated TrackList Component:
- **New props**: Added `lovedTracks` and `albumArtist` to receive loved tracks data
- **Heart icons**: Red heart SVGs appear next to track names that are loved on Last.fm  
- **Smart matching**: Compares track names and artists with loved tracks data
- **Performance optimization**: Uses a computed Set-based lookup for O(1) performance instead of O(n) searches
- **Responsive layout**: Hearts are positioned properly without breaking the track list layout

### Updated AlbumView:
- **Data passing**: Now passes loved tracks array and album artist to the TrackList component
- **Integration**: Hearts automatically appear when loved tracks data is loaded

## Key Features:
- **Individual track indicators**: Each loved track gets its own heart icon
- **Fast performance**: Optimized lookup system for large loved tracks collections
- **Visual clarity**: Red hearts clearly indicate which specific tracks are loved
- **Tooltip support**: Hearts have title attributes for accessibility
- **Flexible layout**: Hearts don't interfere with track numbers or durations

Now when you view an album, you'll see:
1. **Overall statistics** at the top showing total loved tracks from the album
2. **Individual hearts** next to each specific track that's in your Last.fm loved tracks

This gives you both the big picture and granular detail about your Last.fm loved tracks for any album!

---

