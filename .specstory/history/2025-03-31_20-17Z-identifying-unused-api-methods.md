<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session d37bfc80-006c-4a32-8443-00ab0dabb324 (2025-03-31 20:17Z) -->

# Identifying Unused API Methods (2025-03-31 20:17Z)

_**User (2025-03-31 20:17Z)**_

check if there are unused api methods

---

_**Agent (mode Agent)**_

I'll help you check for unused API methods. Let me first search through the codebase to find all API-related code.


---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "api methods or functions in api.js" • **17** results</summary>
            
| File | Lines |
|------|-------|
| `src/utils/api.js` | L136-152 |
| `src/utils/api.js` | L25-34 |
| `src/utils/api.js` | L1-25 |
| `src/utils/api.js` | L46-58 |
| `src/utils/api.js` | L120-136 |
| `src/utils/api.js` | L152-168 |
| `src/utils/api.js` | L34-46 |
| `src/utils/api.js` | L168-185 |
| `src/utils/api.js` | L92-105 |
| `src/utils/api.js` | L58-92 |
| `src/utils/api.js` | L105-120 |
| `src/utils/auth.js` | L1-44 |
| `src/utils/cache.js` | L22-30 |
| `src/utils/cache.js` | L1-9 |
| `src/utils/cache.js` | L9-22 |
| `src/utils/auth.js` | L44-66 |
| `src/utils/auth.js` | L66-70 |

</details>
</tool-use>

---

Now, let me search through the codebase to find where these API methods are being used.


---

<tool-use data-tool-type="search" data-tool-name="codebase_search">
<details>
                <summary>Tool use: **codebase_search** • Searched codebase "import from api.js or using api methods" • **25** results</summary>
            
| File | Lines |
|------|-------|
| `src/utils/api.js` | L136-152 |
| `src/constants.js` | L4-8 |
| `src/utils/api.js` | L25-34 |
| `src/utils/api.js` | L1-25 |
| `src/utils/api.js` | L120-136 |
| `src/utils/api.js` | L46-58 |
| `src/utils/api.js` | L152-168 |
| `src/utils/api.js` | L34-46 |
| `src/utils/api.js` | L168-185 |
| `src/utils/api.js` | L92-105 |
| `src/utils/api.js` | L58-92 |
| `src/utils/api.js` | L105-120 |
| `src/utils/auth.js` | L1-44 |
| `src/views/ArtistView.vue` | L1-56 |
| `src/firebase.js` | L1-17 |
| `src/utils/cache.js` | L9-22 |
| `src/utils/auth.js` | L44-66 |
| `src/composables/usePlaylistData.js` | L36-64 |
| `src/views/PlaylistView.vue` | L1-35 |
| `src/constants.js` | L1-4 |
| `src/utils/cache.js` | L1-9 |
| `src/views/ArtistView.vue` | L56-126 |
| `src/utils/cache.js` | L22-30 |
| `src/views/PlaylistSingle.vue` | L1-44 |
| `src/composables/usePlaylistData.js` | L1-36 |

</details>
</tool-use>

---

Let me analyze the API methods and their usage:

1. `getToken()` - Used in `auth.js` for token management
2. `getPlaylist(playlistId)` - Used in `PlaylistView.vue` and `PlaylistSingle.vue`
3. `getPlaylistItems(playlistId, accessToken, limit, offset)` - Not found in use
4. `getAlbum(accessToken, album_id)` - Not found in use
5. `getUniqueAlbumIdsFromPlaylist(playlistId, accessToken)` - Used in `PlaylistSingle.vue`
6. `getAlbumsBatch(accessToken, albumIds)` - Used internally by `loadAlbumsBatched`
7. `loadAlbumsBatched(albumIds, accessToken)` - Used in `PlaylistSingle.vue`
8. `getArtistAlbums(artistId, accessToken, limit, offset)` - Used in `ArtistView.vue`
9. `getArtist(artistId, accessToken)` - Used in `ArtistView.vue`
10. `getAlbumTracks(albumId)` - Not found in use
11. `checkTracksInPlaylists(trackIds, playlistIds)` - Not found in use

Based on my analysis, there are 4 unused API methods:
1. `getPlaylistItems()`
2. `getAlbum()`
3. `getAlbumTracks()`
4. `checkTracksInPlaylists()`

These methods appear to be defined but not imported or used anywhere in the codebase. They might be:
1. Leftover from previous development
2. Planned for future use
3. Alternative implementations that were replaced by other methods

Would you like me to:
1. Remove these unused methods
2. Keep them for potential future use
3. Investigate further to see if they might be needed for planned features

Please let me know how you'd like to proceed.

---

_**User (2025-03-31 20:19Z)**_

delete getPlaylistItems and checkTracksInPlaylist

---

_**Agent (mode Agent)**_

I'll help you delete those two unused API methods. Let me edit the `api.js` file.


---

<tool-use data-tool-type="write" data-tool-name="edit_file">

<details><summary>Tool use: **edit_file** • Edit file: src/utils/api.js</summary>

**Chunk 1**
Lines added: undefined, lines removed: 12

```diff
@@ -33,16 +33,4 @@
    return await response.json();
  }
- 
- export async function getPlaylistItems(playlistId, accessToken, limit = 100, offset = 0) {
-   const response = await fetch(
-     &#96;https://api.spotify.com/v1/playlists/${playlistId}/tracks?limit=${limit}&amp;offset=${offset}&#96;,
-     {
-       method: "GET",
-       headers: { Authorization: "Bearer " + accessToken },
-     }
-   );
- 
-   return await response.json();
- }
  
  export async function getAlbum(accessToken, album_id) {
```

**Chunk 2**
Lines added: 16, lines removed: undefined

```diff
@@ -57,4 +45,20 @@
    return await response.json();
  }
+ 
+ export async function getAlbumTracks(albumId) {
+   const response = await fetch(
+     &#96;https://api.spotify.com/v1/albums/${albumId}/tracks&#96;,
+     {
+       method: "GET",
+       headers: { Authorization: "Bearer " + localStorage.getItem("token") },
+     }
+   );
+ 
+   if (!response.ok) {
+     throw new Error(&#96;Failed to fetch album tracks: ${response.status}&#96;);
+   }
+ 
+   return await response.json();
+ }
  
  export async function getUniqueAlbumIdsFromPlaylist(playlistId, accessToken) {
```

**Chunk 3**
Lines added: undefined, lines removed: 33

```diff
@@ -151,36 +155,3 @@
    return await response.json();
  }
- 
- export async function getAlbumTracks(albumId) {
-   const response = await fetch(
-     &#96;https://api.spotify.com/v1/albums/${albumId}/tracks&#96;,
-     {
-       method: "GET",
-       headers: { Authorization: "Bearer " + localStorage.getItem("token") },
-     }
-   );
- 
-   if (!response.ok) {
-     throw new Error(&#96;Failed to fetch album tracks: ${response.status}&#96;);
-   }
- 
-   return await response.json();
- }
- 
- export async function checkTracksInPlaylists(trackIds, playlistIds) {
-   // Spotify API allows checking up to 50 tracks at once
-   const response = await fetch(
-     &#96;https://api.spotify.com/v1/me/tracks/contains?ids=${trackIds.join(',')}&#96;,
-     {
-       method: "GET",
-       headers: { Authorization: "Bearer " + localStorage.getItem("token") },
-     }
-   );
- 
-   if (!response.ok) {
-     throw new Error(&#96;Failed to check tracks: ${response.status}&#96;);
-   }
- 
-   return await response.json();
- }
  
```

</details>

</tool-use>

---

I've successfully removed the `getPlaylistItems` and `checkTracksInPlaylists` functions from the `api.js` file. The changes have been applied correctly. The remaining API methods are still intact and available for use in the application.

Would you like me to do anything else with the API methods?

---

